<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>City Management</title>
    </h:head>
    <h:body>

        <h:form id="form">

            <h:panelGrid columns="1">

                <h:panelGrid columns="1">

                    <p:dataTable var="cityvar" value="#{CityMBean.citylist}" rowKey="#{cityvar.cityID}" paginator="true" rows="10"
                                 selection="#{CityMBean.city}" selectionMode="single" filteredValue="#{CityMBean.filteredCity}" id="citiesTable">

                        <p:ajax event="rowSelect" update=":form:display" oncomplete="cityDialog.show()" />

                        <f:facet name="header">
                            City Management
                        </f:facet>

                        <p:column headerText="City ID" sortBy="#{cityvar.cityID}" filterBy="#{cityvar.cityID}" id="cityID">
                            #{cityvar.cityID}
                        </p:column>

                        <p:column headerText="City Name" sortBy="#{cityvar.cityName}" filterBy="#{cityvar.cityName}" id="cityName">
                            #{cityvar.cityName}
                        </p:column>

                    </p:dataTable>



                    <p:dialog header="City Detail" widgetVar="cityDialog" resizable="true"  
                              width="350" showEffect="explode" hideEffect="explode">

                        <h:panelGrid id="display" columns="2" cellpadding="4">

                            <f:facet name="header">
                                <h:outputText value="Hinh anh" />
                            </f:facet>

                            <h:outputText value="City ID " />
                            <h:inputText value="#{CityMBean.city.cityID}" id="cityID"/>                        

                            <h:outputText value="City Name" />
                            <h:inputText value="#{CityMBean.city.cityName}" id="cityName"/>

                            <p:commandButton value="Delete" action="#{CityMBean.removeCity()}" oncomplete="cityDialog.hide()" update="citiesTable"/>
                            <p:commandButton value="Update" action="#{CityMBean.editCity()}" oncomplete="cityDialog.hide()" update="citiesTable"/>

                        </h:panelGrid>
                    </p:dialog>    

                </h:panelGrid>



                <h:panelGrid columns="1">

                    <p:commandButton id="viewButton" value="Add new City" 
                                     oncomplete="addCityDialog.show()"/> 

                    <p:dialog id="dialogadd" header="Add New City" widgetVar="addCityDialog" resizable="false"  
                              showEffect="fade" hideEffect="fade">  
                        <h:panelGrid id="displayAdd" columns="3" cellpadding="4">  
                            <p:outputLabel value="City ID" for="ciID"/>
                            <p:inputText id="ciID" value="#{CityMBean.city.cityID}" title="City ID" required="true"/>                    
                            <p:message for="ciID"/>

                            <p:outputLabel value="City Name" for="ciName"/>
                            <p:inputText id="ciName" value="#{CityMBean.city.cityName}" title="City Name" required="true" />                    
                            <p:message for="ciName"/>

                        </h:panelGrid>  
                        <p:commandButton value="Create" action="#{CityMBean.createCity()}" oncomplete="addCityDialog.hide()" update="citiesTable"/>                      
                    </p:dialog>

                </h:panelGrid>

            </h:panelGrid>

        </h:form>

    </h:body>
</html>

